ğŸ“Œ Instrucciones para Replit â€” â€œReserva del cliente â†’ Panel Admin (tiempo real)â€

Objetivo: cuando el cliente crea una reserva en /cliente, esa reserva debe aparecer automÃ¡ticamente en el Dashboard de /admin y en la lista de agendamientos, sin recargar la pÃ¡gina.

1) Modelo de datos Ãºnico (consistencia)

Guardar cada reserva como un documento Ãºnico en la colecciÃ³n bookings (o equivalente) con estos campos mÃ­nimos:
	â€¢	id (auto)
	â€¢	createdAt (timestamp del servidor)
	â€¢	date (fecha de la reserva, YYYY-MM-DD)
	â€¢	time (HH:mm)
	â€¢	serviceId, serviceName, vehicleType
	â€¢	plate, customerName, customerPhone
	â€¢	price (validado con la base de datos)
	â€¢	paymentMethod (card, pix, cash)
	â€¢	status (pending / en_lavado / finalizado / cancelado)
	â€¢	updatedAt (timestamp del servidor)

Importante: validar â€œprice mismatchâ€ antes de crear el documento (precio del front debe coincidir con el precio vigente en la base).

2) Escritura atÃ³mica al confirmar la reserva (lado cliente)
	â€¢	Al confirmar, crear el documento en bookings con status = "pending".
	â€¢	Retornar al cliente un aviso: â€œâœ… Reserva confirmada con Ã©xitoâ€.
	â€¢	No tocar otras colecciones; la fuente de verdad es bookings.

3) SuscripciÃ³n en tiempo real en /admin

En el Dashboard y en la tabla de agendamientos:
	â€¢	Usar una suscripciÃ³n en tiempo real a bookings filtrada por la fecha de hoy.
	â€¢	Al recibir un nuevo documento o un cambio de estado, actualizar contadores y listas en pantalla:
	â€¢	â€œAgendamientos de hoyâ€ (total)
	â€¢	â€œEn lavadoâ€
	â€¢	â€œFinalizados hoyâ€
	â€¢	â€œIngresos del dÃ­aâ€ (sumar cuando status = finalizado y paymentMethod definido)

4) Acciones del admin (deben reflejarse en la misma colecciÃ³n)
	â€¢	Cambiar estado desde la tabla:
	â€¢	Iniciar lavado â†’ status = "en_lavado"
	â€¢	Finalizar â†’ status = "finalizado" + registrar hora de cierre + contabilizar ingresos
	â€¢	Cancelar â†’ status = "cancelado" (sin borrar el documento)
	â€¢	Cada acciÃ³n muestra snackbar:
	â€¢	Ã‰xito: â€œâœ… AcciÃ³n realizada con Ã©xitoâ€
	â€¢	Error: â€œâŒ OcurriÃ³ un error. Intenta nuevamente.â€

5) NotificaciÃ³n al admin (opcional pero recomendado)
	â€¢	Al crear una nueva reserva, disparar notificaciÃ³n visual en /admin:
	â€¢	Badge o campana con contador + sonido breve opcional.
	â€¢	Toast: â€œğŸ†• Nueva reserva de {cliente} para hoy a las {hora}.â€
	â€¢	No recargar la pÃ¡gina; solo actualizar el estado.

6) Filtros y vistas
	â€¢	Dashboard /admin: mostrar resumen del dÃ­a (hoy).
	â€¢	Ver lista: tabla con filtros por Estado, Servicio, MÃ©todo de pago, y bÃºsqueda por placa o nombre.
	â€¢	PaginaciÃ³n: 10 por pÃ¡gina.

7) Seguridad y performance
	â€¢	Acceso a /admin solo para usuarios con rol admin.
	â€¢	Reglas de lectura/escritura acordes: el cliente solo puede crear su propia reserva; el admin puede leer y actualizar estados.
	â€¢	Evitar llamadas duplicadas; manejar loading por tarjeta (spinners).
	â€¢	Index para consultas por date y status (optimiza el tiempo real).

8) Criterios de aceptaciÃ³n (QA)
	â€¢	Al crear una reserva en /cliente, aparece en menos de 2s en /admin (dashboard y lista).
	â€¢	Cambiar estado en /admin se refleja inmediatamente en los contadores.
	â€¢	En caso de price mismatch, se bloquea la creaciÃ³n y se muestra al cliente:
â€œâš ï¸ El precio no coincide con la base de datos. Actualiza la tarifa y vuelve a intentar.â€
	â€¢	NingÃºn cambio afecta la Home ni el panel del Cliente.
